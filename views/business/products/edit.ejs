<%- include("../../partials/header") %>

<link rel="stylesheet" href="/new.css">


<%- include("../../partials/navbarBusiness") %>




<div class="container">
     <h1>
	Edit <%= data.product.name  %>
	</h1>
<form action="/business/products/<%= data.product._id %>?_method=PUT" method="POST" enctype="multipart/form-data">

          <div class="input-group mb-3">
          <div class="input-group-prepend">
            <span class="input-group-text" id="inputGroupFileAddon01">Upload</span>
          </div>
          <div class="custom-file">
            <input type="file" class="custom-file-input" name = "file" id="inputGroupFile01" aria-describedby="inputGroupFileAddon01">
            <label class="custom-file-label" for="inputGroupFile01">Escoge una foto</label>
          </div>
        </div>

        
          <div class="form-group  ">
             <label for="FormControlInput1">Nombre del producto</label>
            <input type="text" name="product[name]" class="form-control" id="FormControlInput1" placeholder="" value = "<%= data.product.name %>" required>
          </div>

          <div class="form-group">
            <label for="FormControlTextarea1">Descripcion</label>
            <textarea class="form-control" name="product[description]" id="FormControlTextarea1" rows="3" required><%= data.product.description %></textarea>
          </div>

          <div class="form-group">
             <label for="FormControlInputNumber">Precio del producto</label>
            <input type="number"  name="product[price]"  class="form-control" id="FormControlInputNumber" placeholder="" value = "<%= data.product.price %>" required>
          </div>


          <div class="form-group">
            <label for="exampleFormControlSelect2">Selecciona una categoria</label>
            <select multiple id="cat" class="form-control chosen-select-1 "  name="product[category]" id="exampleFormControlSelect2">
              <% data.categories.forEach(function(category) { %>
                <option value= "<%= category._id %>"><%= category.name %></option>
             <% }); %>
            </select>
          </div>

          <div class="form-group form-check">
              <input type="checkbox" name="product[available]" class="form-check-input" id="Check1" 
					<% if(data.product.available){ %>
					 
					checked				 
						 
					<% }%>
					 >
              <label class="form-check-label"     for="Check1">Esta Disponible?</label>
        </div>
	
		 <div class="form-group">
             <button type="submit button"  class="btn btn-warning">EDITAR PRODUCTO</button>
        </div>
		

</form>
</div>   





<%- include("../../partials/framejs") %>
<script type="text/javascript" src="/new.js"></script>
<script type="text/javascript" src="/chosen.js"></script>
<script>
var num = "<%- data.product.category._id %>";

 // detect array length
// looping over array


    // $("#secondary_group option[value='" + valArr[i] + "']")
    // select the option with value match with the valArr
    // from the select with id=secondary_group and if match found
    // .attr("selected", 1);  make that option as default selected

    $("#cat option[value='" + num + "']").attr("selected", 1);


// after selecting the options
// refresh the select using below code
// And this code should belong outside of
// above loop, because
// refreshing within loop will only 
// select last matched element
// not all matched
$("#cat").trigger("chosen:updated");

</script>


<%- include("../../partials/footer") %>