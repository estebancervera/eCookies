<%- include("../partials/header") %>

<link rel="stylesheet" href="/orders.css">


<%- include("../partials/navbarBusiness") %>

<% var options = {hour: 'numeric', minute: 'numeric', weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' }; %>
<%  const dateTimeFormat = new Intl.DateTimeFormat('es', {hour: 'numeric', minute: 'numeric', weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' }) %>

<div class="container border border-dark rounded-lg">
    <table data-toggle="table">
        <thead>
          <tr>
            
            <th>Fecha de la Orden</th>
            <th>Numero de Productos</th>
            <th>Numero de Paquetes</th>
            <th>Fecha de Entrega</th>
            <th>Ver Detalles</th>
            <th>Estado</th>
          </tr>
        </thead>
        <tbody>
        <% orders.forEach(function(order){ %>

          <% const [{ value: hour },,{ value: minute },,{ value: weekday },,{value: year},,{value: month},,{value: day}] = dateTimeFormat .formatToParts(order.deliveryDate)  %>


                <% var numCookies = 0; %>
                   <%  order.packets.forEach((packet) => { numCookies += packet.quantity;}) %>
          
          <tr>
            
            <td><%= `${day} - ${month} - ${year}, a las ${hour}:${minute}` %></td>
            <td><%= numCookies %></td>
            <td><%= order.packets.length %></td>
            <td><%= order.deliveryDate.toLocaleString() %></td>
            <td><a href="/business/orders/<%= order._id %>/show">MOSTRAR</a></td>
            <td><%= order.status %></td>
          </tr>
        
          <% });  %>
          
        </tbody>
      </table>
</div>
<%- include("../partials/framejs") %>


<%- include("../partials/footer") %>